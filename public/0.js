webpackJsonp([0],{310:function(t,a,e){var i=e(311);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);e(1)("7009a836",i,!0,{})},311:function(t,a,e){(t.exports=e(0)(!1)).push([t.i,"@media screen and (min-width:830px){.taskDetail[data-v-556b6986]{width:80%}.task-left[data-v-556b6986]{margin-right:25px}}@media screen and (max-width:830px) and (min-width:425px){.taskDetail[data-v-556b6986]{width:80%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.task-left[data-v-556b6986]{margin-right:0}h1[data-v-556b6986]{font-size:1.5rem}}@media screen and (max-width:425px){.taskDetail[data-v-556b6986]{width:100%;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.task-left[data-v-556b6986]{margin-right:0}h1[data-v-556b6986]{font-size:1.5rem}}.pannel[data-v-556b6986]{background-color:#fff;border:1px solid transparent;border-radius:4px;-webkit-box-shadow:0 2px 10px rgba(0,0,0,.05);box-shadow:0 2px 10px rgba(0,0,0,.05)}.taskDetail[data-v-556b6986]{margin:20px auto;display:-webkit-box;display:-ms-flexbox;display:flex}.taskDetail .task-left[data-v-556b6986]{-webkit-box-flex:3;-ms-flex:3 0;flex:3 0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:0 20px;margin-bottom:20px;-webkit-box-sizing:border-box;box-sizing:border-box}.taskDetail .task-left .task-info[data-v-556b6986]{color:#9b9b9b;font-size:12px;font-weight:400;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.taskDetail .task-left .task-info .task-info-item[data-v-556b6986]{margin-right:20px}.taskDetail .task-left .task-info .task-info-item span[data-v-556b6986]{color:#409dfd}.taskDetail .task-left .task-detail[data-v-556b6986]{margin:20px 0;color:#222;line-height:1.5rem}.taskDetail .task-left .task-file[data-v-556b6986]{font-size:13px;margin-bottom:30px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.taskDetail .task-left .task-file i[data-v-556b6986]{margin-bottom:15px}.taskDetail .task-left .task-file i a[data-v-556b6986]{text-decoration:none}.taskDetail .task-right[data-v-556b6986]{-webkit-box-flex:1;-ms-flex:1 0;flex:1 0;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px;margin-bottom:20px;-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden}.taskDetail .task-right .teacher-info[data-v-556b6986],.taskDetail .task-right[data-v-556b6986]{display:-webkit-box;display:-ms-flexbox;display:flex}.taskDetail .task-right .teacher-info .teacher-img[data-v-556b6986]{width:64px;height:64px;border-radius:32px;-o-object-fit:cover;object-fit:cover}.taskDetail .task-right .teacher-info .teacher-name[data-v-556b6986]{margin-left:20px;margin-top:10px}.taskDetail .task-right .more-tasks-title[data-v-556b6986]{border-bottom:1px solid #e5e9ef}.taskDetail .task-right .more-tasks-title h3[data-v-556b6986]{margin-bottom:10px}.taskDetail .task-right .task-item-container[data-v-556b6986]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:16px 0;width:100%}.taskDetail .task-right .task-item-container .task-item[data-v-556b6986]{width:100%;margin-bottom:5px;font-size:14px;color:#757575;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.taskDetail .task-right .task-item-container .task-item[data-v-556b6986]:hover{color:#409dfd;cursor:pointer}",""])},312:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var i=e(79),s=e.n(i);a.default={data:function(){return{MyAxios:axios.create({headers:{"Content-Type":"application/json"}}),taskData:"",moreTask:"",teamData:[]}},methods:{toTask:function(t){this.$router.push({path:"/index/task/"+t})},init:function(){var t,a=(t=s.a.mark(function t(a){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this,t.next=3,this.MyAxios.get("/api/user/team/").then(function(t){var a=t.data.data;for(var i in a)e.$set(a[i],"isSign",!1);e.teamData=a,console.log(e.teamData)}).catch(function(t){alert(t.response.data.errmsg)});case 3:this.MyAxios.get("/api/task/"+a).then(function(t){e.taskData=t.data.data;var a=e.teamData;for(var i in a)e.taskData.signTeams.includes(a[i].id)?e.$set(a[i],"isSign",!0):e.$set(a[i],"isSign",!1);e.teamData=a,e.MyAxios.get("/api/task/more/"+e.taskData.creater_id).then(function(t){e.moreTask=t.data.data}).catch(function(t){alert(t.response.data.errmsg)})}).catch(function(t){404==t.response.status?location.href="/404":alert(t.response.data.errmsg)});case 4:case"end":return t.stop()}},t,this)}),function(){var a=t.apply(this,arguments);return new Promise(function(t,e){return function i(s,n){try{var o=a[s](n),r=o.value}catch(t){return void e(t)}if(!o.done)return Promise.resolve(r).then(function(t){i("next",t)},function(t){i("throw",t)});t(r)}("next")})});return function(t){return a.apply(this,arguments)}}(),sign:function(t,a,e){var i=this;this.MyAxios.post("/api/task/sign",{taskId:a,teamId:t}).then(function(t){i.teamData[e].isSign=!0}).catch(function(t){alert(t.response.data.errmsg)})}},beforeRouteUpdate:function(t,a,e){this.init(t.params.taskId),e()},activated:function(){this.$emit("changePage","task"),this.taskData="",this.init(this.$route.params.taskId)}}},313:function(t,a){t.exports={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"taskDetail"},[e("div",{staticClass:"task-left pannel"},[e("h1",[t._v(t._s(t.taskData.title))]),t._v(" "),e("div",{staticClass:"task-info"},[e("div",{staticClass:"task-info-item publish-date"},[t._v(t._s(t.taskData.created_at))]),t._v(" "),e("div",{staticClass:"task-info-item team-number"},[t._v("报名队数:\n        "),e("span",[t._v(t._s(t.taskData.registTeams))])]),t._v(" "),e("div",{staticClass:"task-info-item regist-end-time"},[t._v("距报名截止:\n        "),e("span",[t._v(t._s(t.taskData.regist_end_at))])]),t._v(" "),e("div",{staticClass:"task-info-item submit-end-time"},[t._v("距课题截止:\n        "),e("span",[t._v(t._s(t.taskData.submit_end_at))])]),t._v(" "),e("el-popover",{attrs:{placement:"bottom",trigger:"hover"}},[e("el-table",{attrs:{data:t.teamData,"max-height":"300"}},[e("el-table-column",{attrs:{prop:"title",label:"可选团队"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("div",{staticClass:"surveyTitle"},[t._v(t._s(a.row.team_name))])]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"操作",width:"55"},scopedSlots:t._u([{key:"default",fn:function(a){return[a.row.isSign?e("el-button",{attrs:{type:"text",size:"small",disabled:""}},[t._v("\n                已报名\n              ")]):e("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(e){e.preventDefault(),t.sign(a.row.id,t.taskData.id,a.$index)}}},[t._v("\n                报名\n              ")])]}}])})],1),t._v(" "),e("el-button",{staticClass:"button",attrs:{slot:"reference",type:"primary",size:"mini",plain:""},on:{click:function(t){t.stopPropagation()}},slot:"reference"},[t._v("报名")])],1)],1),t._v(" "),e("div",{staticClass:"task-detail",domProps:{innerHTML:t._s(t.taskData.detail)}}),t._v(" "),e("div",{staticClass:"task-file"},t._l(t.taskData.file,function(a,i){return e("i",{key:i,staticClass:"el-icon-document"},[t._v("\n         \n        "),e("a",{attrs:{href:"storage/"+a.download_link}},[t._v(t._s(a.original_name))])])}))]),t._v(" "),e("div",{staticClass:"task-right pannel"},[e("div",{staticClass:"teacher-info"},[e("img",{staticClass:"teacher-img",attrs:{src:t.taskData.creater_avatar}}),t._v(" "),e("div",{staticClass:"teacher-name"},[t._v(t._s(t.taskData.creater_name))])]),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"task-item-container"},t._l(t.moreTask,function(a){return e("div",{key:a.id,staticClass:"task-item",on:{click:function(e){t.toTask(a.id)}}},[t._v(t._s(a.title))])}))])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"more-tasks-title"},[a("h3",[this._v("更多课题")])])}]}},318:function(t,a,e){var i=e(2)(e(312),e(313),!1,function(t){e(310)},"data-v-556b6986",null);t.exports=i.exports}});